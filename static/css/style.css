*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}

/* ===== DARK THEME (default) ===== */
:root, [data-theme="dark"] {
    --primary:#635bff; --primary-light:#7c75ff;
    --success:#3ecf8e; --success-bg:rgba(62,207,142,.12);
    --warning:#f5a623; --warning-bg:rgba(245,166,35,.12);
    --danger:#ef4444;  --danger-bg:rgba(239,68,68,.12);
    --info:#38bdf8;    --info-bg:rgba(56,189,248,.12);
    --bg:#0a0a0f; --surface:#111118; --surface-2:#1a1a24; --surface-3:#22222f;
    --text:#eeeef0; --text-2:#b4b4c0; --text-3:#70707e;
    --border:#25252f; --border-2:#2f2f3d;
    --shadow:0 1px 3px rgba(0,0,0,.4);
    --r:10px; --r-lg:14px;
}

/* ===== LIGHT THEME ===== */
[data-theme="light"] {
    --primary:#5046e5; --primary-light:#6c63ff;
    --success:#16a34a; --success-bg:rgba(22,163,74,.1);
    --warning:#d97706; --warning-bg:rgba(217,119,6,.1);
    --danger:#dc2626;  --danger-bg:rgba(220,38,38,.08);
    --info:#2563eb;    --info-bg:rgba(37,99,235,.08);
    --bg:#f5f5f7; --surface:#ffffff; --surface-2:#f0f0f3; --surface-3:#e5e5ea;
    --text:#1a1a1a; --text-2:#4a4a5a; --text-3:#8a8a9a;
    --border:#e0e0e6; --border-2:#d0d0d8;
    --shadow:0 1px 3px rgba(0,0,0,.08);
}

body{font-family:'Inter',system-ui,-apple-system,sans-serif;background:var(--bg);color:var(--text);height:100vh;overflow:hidden;font-size:14px;-webkit-font-smoothing:antialiased;transition:background .3s,color .3s}

/* NAV */
.navbar{height:56px;background:var(--surface);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;padding:0 28px;position:fixed;top:0;left:0;right:0;z-index:100;transition:background .3s,border .3s}
.nav-brand{display:flex;align-items:center;gap:10px;font-weight:700;font-size:15px;letter-spacing:-.3px}
.btn-back{display:none;align-items:center;gap:6px;background:var(--surface-2);border:1px solid var(--border);border-radius:8px;padding:6px 14px 6px 10px;color:var(--text-2);font-size:12.5px;font-weight:600;cursor:pointer;transition:all .2s;font-family:inherit}
.btn-back:hover{background:var(--surface-3);border-color:var(--border-2);color:var(--text)}
.btn-back svg{width:15px;height:15px;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
.btn-back.visible{display:flex}
.nav-logo{width:28px;height:28px;background:var(--primary);border-radius:7px;display:flex;align-items:center;justify-content:center}
.nav-logo svg{width:16px;height:16px;stroke:#fff;fill:none;stroke-width:2.2}
.nav-right{display:flex;align-items:center;gap:10px}
.nav-tag{background:var(--success-bg);color:var(--success);font-size:11px;font-weight:600;padding:2px 8px;border-radius:5px}

/* Theme toggle */
.theme-toggle{width:38px;height:38px;background:var(--surface-2);border:1px solid var(--border);border-radius:10px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .3s,border .3s;flex-shrink:0}
.theme-toggle:hover{background:var(--surface-3);border-color:var(--border-2)}
.theme-toggle svg{width:18px;height:18px;fill:none;stroke:var(--text-2);stroke-width:2;stroke-linecap:round;stroke-linejoin:round;transition:stroke .3s}
.theme-toggle .ico-moon{display:block}
.theme-toggle .ico-sun{display:none}
[data-theme="light"] .theme-toggle .ico-moon{display:none}
[data-theme="light"] .theme-toggle .ico-sun{display:block}

/* LAYOUT */
.app{display:flex;flex-direction:column;height:100vh;padding-top:56px}

.upload-view{display:flex;align-items:center;justify-content:center;flex:1;padding:32px}
.upload-view.hidden{display:none}
.upload-box{width:100%;max-width:520px;text-align:center}
.upload-box h2{font-size:22px;font-weight:700;margin-bottom:6px;letter-spacing:-.4px}
.upload-box .desc{color:var(--text-3);font-size:13.5px;margin-bottom:28px}

.drop-zone{border:1.5px dashed var(--border-2);border-radius:var(--r-lg);padding:48px 32px;cursor:pointer;transition:all .25s;background:var(--surface)}
.drop-zone:hover,.drop-zone.drag-over{border-color:var(--primary);background:var(--surface-2)}
.drop-zone input{display:none}
.dz-icon{width:52px;height:52px;margin:0 auto 16px;background:linear-gradient(135deg,var(--primary),var(--primary-light));border-radius:14px;display:flex;align-items:center;justify-content:center}
.dz-icon svg{width:24px;height:24px;stroke:#fff;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
.drop-zone h3{font-size:15px;font-weight:600;margin-bottom:4px}
.drop-zone p{color:var(--text-3);font-size:13px}
.format-tags{display:flex;gap:6px;justify-content:center;margin-top:14px}
.format-tags span{font-size:11px;font-weight:600;color:var(--text-3);background:var(--surface-2);border:1px solid var(--border);padding:3px 12px;border-radius:6px}

.file-row{display:none;align-items:center;gap:10px;margin-top:16px;padding:10px 16px;background:var(--surface-2);border-radius:var(--r);border:1px solid var(--border)}
.file-row.visible{display:flex}
.file-row .f-icon{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700}
.file-row .f-name{flex:1;font-weight:500;font-size:13px;text-align:left;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.file-row .f-remove{background:none;border:none;color:var(--text-3);cursor:pointer;font-size:18px;padding:0 4px;line-height:1}
.file-row .f-remove:hover{color:var(--danger)}

.btn-analyze{display:none;width:100%;margin-top:16px;padding:13px;background:var(--primary);color:#fff;border:none;border-radius:var(--r);font-size:14px;font-weight:600;cursor:pointer;transition:all .2s;font-family:inherit}
.btn-analyze.visible{display:block}
.btn-analyze:hover{background:var(--primary-light)}
.btn-analyze:disabled{opacity:.5;cursor:not-allowed}

.error-msg{display:none;margin-top:12px;padding:10px 14px;background:var(--danger-bg);border:1px solid rgba(239,68,68,.2);border-radius:var(--r);color:var(--danger);font-size:13px}
.error-msg.visible{display:block}

.loader{display:none;flex-direction:column;align-items:center;justify-content:center;flex:1;gap:16px}
.loader.visible{display:flex}
.spinner{width:36px;height:36px;border:3px solid var(--border);border-top-color:var(--primary);border-radius:50%;animation:spin .7s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.loader p{color:var(--text-3);font-size:13px}

/* RESULTS */
.results-view{display:none;flex:1;overflow:hidden}
.results-view.visible{display:flex}

.panel-left{width:340px;min-width:340px;background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;overflow-y:auto;transition:background .3s,border .3s}
.panel-left::-webkit-scrollbar{width:4px}
.panel-left::-webkit-scrollbar-thumb{background:var(--border-2);border-radius:4px}

.score-section{padding:28px 24px 20px;text-align:center;border-bottom:1px solid var(--border)}
.score-ring{position:relative;width:140px;height:140px;margin:0 auto 14px}
.score-ring svg{transform:rotate(-90deg);width:140px;height:140px}
.score-ring .track{fill:none;stroke:var(--border);stroke-width:8}
.score-ring .progress{fill:none;stroke-width:8;stroke-linecap:round;transition:stroke-dashoffset 1.2s cubic-bezier(.4,0,.2,1),stroke .4s}
.score-ring .score-inner{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}
.score-ring .score-num{font-size:38px;font-weight:800;line-height:1;letter-spacing:-1px}
.score-ring .score-lbl{font-size:11px;color:var(--text-3);margin-top:2px;text-transform:uppercase;letter-spacing:1px;font-weight:600}

.verdict-text{font-size:12.5px;color:var(--text-2);line-height:1.5;margin-bottom:16px;padding:0 8px}
.meta-chips{display:flex;flex-wrap:wrap;gap:6px;justify-content:center}
.meta-chip{font-size:11px;font-weight:600;padding:4px 10px;background:var(--surface-2);border:1px solid var(--border);border-radius:6px;color:var(--text-2)}

.stats-row{display:grid;grid-template-columns:repeat(3,1fr);gap:1px;background:var(--border);border-bottom:1px solid var(--border)}
.stat-item{background:var(--surface);padding:14px 8px;text-align:center;transition:background .3s}
.stat-val{font-size:20px;font-weight:700;margin-bottom:2px}
.stat-lbl{font-size:10.5px;color:var(--text-3);text-transform:uppercase;letter-spacing:.5px;font-weight:500}
.stat-pass .stat-val{color:var(--success)}
.stat-warn .stat-val{color:var(--warning)}
.stat-fail .stat-val{color:var(--danger)}

.cat-overview{padding:16px 20px;flex:1}
.cat-overview-title{font-size:11px;text-transform:uppercase;letter-spacing:.8px;color:var(--text-3);font-weight:600;margin-bottom:12px}
.cat-bar-item{margin-bottom:10px}
.cat-bar-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}
.cat-bar-name{font-size:12px;font-weight:500;color:var(--text-2)}
.cat-bar-pct{font-size:11px;font-weight:700}
.cat-bar-track{height:5px;background:var(--surface-3);border-radius:3px;overflow:hidden}
.cat-bar-fill{height:100%;border-radius:3px;transition:width 1s cubic-bezier(.4,0,.2,1)}

.btn-new-check{margin:16px 20px 20px;padding:10px;text-align:center;background:var(--surface-2);border:1px solid var(--border);border-radius:var(--r);color:var(--text-2);font-size:13px;font-weight:600;cursor:pointer;transition:all .2s;font-family:inherit}
.btn-new-check:hover{border-color:var(--primary);color:var(--primary)}

.panel-right{flex:1;overflow-y:auto;padding:24px 28px;background:var(--bg);transition:background .3s}
.panel-right::-webkit-scrollbar{width:5px}
.panel-right::-webkit-scrollbar-thumb{background:var(--border-2);border-radius:4px}

.tab-bar{display:flex;gap:2px;background:var(--surface);border-radius:var(--r);padding:3px;margin-bottom:20px;border:1px solid var(--border)}
.tab-btn{flex:1;padding:9px 12px;text-align:center;font-size:12.5px;font-weight:600;color:var(--text-3);background:transparent;border:none;border-radius:7px;cursor:pointer;transition:all .2s;font-family:inherit}
.tab-btn:hover{color:var(--text-2)}
.tab-btn.active{background:var(--surface-2);color:var(--text)}

.tab-panel{display:none;animation:fadeIn .3s ease}
.tab-panel.active{display:block}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}

.category{background:var(--surface);border:1px solid var(--border);border-radius:var(--r-lg);margin-bottom:10px;overflow:hidden;transition:background .3s,border .3s}
.cat-head{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;cursor:pointer;transition:background .15s;gap:8px}
.cat-head:hover{background:var(--surface-2)}
.cat-head .left{display:flex;align-items:center;gap:10px;min-width:0}
.cat-icon-sm{width:30px;height:30px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:14px;flex-shrink:0}
.cat-head h3{font-size:13px;font-weight:600;white-space:nowrap}
.cat-head .score-sm{color:var(--text-3);font-weight:400;font-size:12px;margin-left:6px}
.cat-head .right{display:flex;align-items:center;gap:8px;flex-shrink:0}

.badge{padding:3px 10px;border-radius:5px;font-size:11px;font-weight:600}
.badge-excellent{background:var(--success-bg);color:var(--success)}
.badge-good{background:var(--info-bg);color:var(--info)}
.badge-fair{background:var(--warning-bg);color:var(--warning)}
.badge-poor{background:var(--danger-bg);color:var(--danger)}

.chevron{color:var(--text-3);font-size:10px;transition:transform .25s}
.category.open .chevron{transform:rotate(180deg)}

.cat-body{max-height:0;overflow:hidden;transition:max-height .3s ease}
.category.open .cat-body{max-height:800px}

.findings{padding:0 16px 12px}
.finding{display:flex;align-items:flex-start;gap:8px;padding:7px 0;font-size:12.5px;line-height:1.5;border-bottom:1px solid var(--border);color:var(--text-2)}
.finding:last-child{border-bottom:none}

.f-dot{width:18px;height:18px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:10px;margin-top:1px}
.finding-pass .f-dot{background:var(--success-bg);color:var(--success)}
.finding-fail .f-dot{background:var(--danger-bg);color:var(--danger)}
.finding-warning .f-dot{background:var(--warning-bg);color:var(--warning)}
.finding-info .f-dot{background:var(--info-bg);color:var(--info)}

.tip-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--r-lg);padding:16px 18px;margin-bottom:10px;transition:background .3s,border .3s}
.tip-priority{display:inline-block;font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.6px;padding:2px 8px;border-radius:4px;margin-bottom:8px}
.tip-high{background:var(--danger-bg);color:var(--danger)}
.tip-medium{background:var(--warning-bg);color:var(--warning)}
.tip-low{background:var(--success-bg);color:var(--success)}
.tip-card h4{font-size:14px;font-weight:600;margin-bottom:6px}
.tip-card .tip-desc{font-size:12.5px;color:var(--text-2);line-height:1.55;margin-bottom:8px}
.tip-card .tip-impact{font-size:11.5px;color:var(--text-3);font-style:italic;padding-top:8px;border-top:1px solid var(--border)}

@media(max-width:900px){
    body{overflow:auto;height:auto}
    .app{height:auto;overflow:visible}
    .results-view{flex-direction:column;overflow:visible}
    .panel-left{width:100%;min-width:unset;border-right:none;border-bottom:1px solid var(--border);overflow:visible}
    .panel-right{overflow:visible;padding:20px 16px}
}
@media(max-width:600px){
    .navbar{padding:0 12px;gap:6px}
    .nav-brand{font-size:14px;gap:8px}
    .nav-tag{font-size:10px;padding:2px 6px}
    .btn-back{padding:5px 10px 5px 7px;font-size:11.5px}
    .btn-back svg{width:13px;height:13px}
    .upload-view{padding:16px}
    .upload-box h2{font-size:18px}
    .upload-box .desc{font-size:12.5px}
    .drop-zone{padding:28px 16px}
    .drop-zone h3{font-size:14px}
    .drop-zone p{font-size:12px}
    .score-section{padding:20px 16px 16px}
    .score-ring{width:110px;height:110px}
    .score-ring svg{width:110px;height:110px}
    .score-ring .score-num{font-size:28px}
    .verdict-text{font-size:12px;padding:0 4px}
    .meta-chips{gap:4px}
    .meta-chip{font-size:10px;padding:3px 7px}
    .stats-row{grid-template-columns:repeat(3,1fr)}
    .stat-val{font-size:17px}
    .stat-lbl{font-size:9.5px}
    .stat-item{padding:10px 4px}
    .cat-overview{padding:12px 12px}
    .cat-bar-name{font-size:11px}
    .cat-bar-pct{font-size:10px}
    .btn-new-check{margin:12px 12px 16px}
    .tab-bar{flex-wrap:wrap;gap:2px;padding:3px}
    .tab-btn{padding:8px 8px;font-size:11.5px}
    .category{margin-bottom:8px}
    .cat-head{padding:10px 12px;gap:6px}
    .cat-head h3{font-size:12px;white-space:normal;word-break:break-word}
    .cat-head .score-sm{font-size:11px;margin-left:4px;white-space:nowrap}
    .cat-icon-sm{width:26px;height:26px;font-size:12px;flex-shrink:0}
    .badge{font-size:10px;padding:2px 7px;white-space:nowrap}
    .finding{font-size:11.5px;gap:6px;padding:6px 0}
    .f-dot{width:16px;height:16px;font-size:9px}
    .findings{padding:0 12px 10px}
    .tip-card{padding:12px 14px}
    .tip-card h4{font-size:13px}
    .tip-card .tip-desc{font-size:11.5px}
    .tip-card .tip-impact{font-size:10.5px}
    .tip-priority{font-size:9px}
}
@media(max-width:380px){
    .nav-tag{display:none}
    .score-ring{width:90px;height:90px}
    .score-ring svg{width:90px;height:90px}
    .score-ring .score-num{font-size:24px}
    .score-ring .score-lbl{font-size:9px}
    .cat-head .left{gap:6px}
    .cat-head .right{gap:4px}
}
